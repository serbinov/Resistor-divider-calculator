<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resistor Divider Calculator | Custom Electronics Design & Development | Oleg Serbinov</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Free online resistor divider calculator with Custom Electronics Design & Development services. 20+ years expertise in PCB design, embedded firmware, mechanical engineering. Calculate R1/R2 from E24/E96/E192 series.">
    <meta name="keywords" content="custom electronics design, electronics development services, PCB design services, embedded firmware development, resistor divider calculator, voltage divider calculator, R1 R2 calculator, E24, E96, E192, HDI PCB layout, STM32 firmware, ESP32 development, mechanical engineering, SolidWorks design, automotive electronics, industrial automation, medical device design, IoT electronics">    <meta name="author" content="Oleg Serbinov">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    
    <!-- Alternative Descriptions for Different Contexts -->
    <meta name="description" lang="en-US" content="Free online resistor divider calculator. Automatically selects R1 and R2 values from standard E24/E96/E192 series for precise output voltage setting. Also provides Custom Electronics Design & Development services including PCB HDI layout, embedded firmware and mechanical design.">
    <meta name="twitter:description" content="Calculate resistor divider values R1 & R2. Supports E24, E96 and E192 series. Includes power and tolerance analysis, and recommendations for packages.">
    
    <!-- Geographic and Topical Variations -->
    <meta name="geo.region" content="Worldwide">
    <meta name="geo.placename" content="Electronics Engineering">
    <meta name="subject" content="Electronics, Power Supply Design, Circuit Calculation">
    <meta name="classification" content="Engineering Tools, Electronic Calculators, Power Electronics">
    <meta name="category" content="Engineering Software, Circuit Design, Power Supply Tools">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Resistor Divider Calculator | Voltage Divider R1/R2 Calculator">
    <meta property="og:description" content="Online tool to calculate resistive voltage divider values (R1, R2) with standard resistor selection, power and tolerance analysis.">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Resistor Divider Calculator">
    <meta property="og:image" content="https://serbinov.github.io/Feedback-resistor-calculator-for-DC-DC/image.png">
    <meta property="og:image:alt" content="Resistive voltage divider diagram">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Resistor Divider Calculator - Free Online Tool">
    <meta name="twitter:description" content="Calculate resistive divider values R1 & R2 with standard resistor selection and power/tolerance analysis.">
    <meta name="twitter:image" content="https://serbinov.github.io/Feedback-resistor-calculator-for-DC-DC/image.png">
    <meta name="twitter:image:alt" content="Resistor divider calculator interface">
    <meta name="twitter:creator" content="@OlegSerbinov">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="application-name" content="Resistor Divider Calculator">
    <meta name="theme-color" content="#3498db">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Resistor Calculator">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Canonical and Alternate Languages -->
    <link rel="canonical" href="https://serbinov.github.io/Resistor-divider-calculator/">
    <link rel="alternate" hreflang="en" href="https://serbinov.github.io/Resistor-divider-calculator/">
    <link rel="alternate" hreflang="x-default" href="https://serbinov.github.io/Resistor-divider-calculator/">
    
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    
    <!-- Google Analytics 4 -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3PHDMJ17WG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3PHDMJ17WG');
    </script>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": ["WebApplication", "SoftwareApplication", "Calculator"],
        "name": "Resistor Divider Calculator",
        "alternateName": ["Voltage Divider Calculator", "R1 R2 Voltage Divider Calculator", "Resistive Divider Tool"],
        "description": "Online tool to calculate resistive voltage divider values (R1 and R2), select standard resistor values from E24/E96/E192, and evaluate power and tolerance effects.",
        "url": "https://serbinov.github.io/Resistor-divider-calculator/",
        "image": "https://serbinov.github.io/Resistor-divider-calculator/image.png",
        "screenshot": "https://serbinov.github.io/Resistor-divider-calculator/image.png",
        "author": {
            "@type": "Person",
            "name": "Oleg Serbinov",
            "url": "https://serbinov.github.io/",
            "sameAs": ["https://github.com/serbinov"]
        },
        "creator": {
            "@type": "Person",
            "name": "Oleg Serbinov"
        },
        "applicationCategory": ["Engineering Calculator", "Electronics Tool", "Circuit Design Software"],
        "applicationSubCategory": "Power Electronics Calculator",
        "operatingSystem": ["Web Browser", "Cross-platform"],
        "browserRequirements": "HTML5, JavaScript enabled",
        "softwareVersion": "1.0",
        "datePublished": "2025-09-19",
        "dateModified": "2025-09-19",
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock",
            "priceValidUntil": "2030-12-31"
        },
        "featureList": [
            "Automatic resistor selection from E24/E96 standard series",
            "Manual resistor value input and verification", 
            "Single known resistor calculation",
            "Voltage divider network design",
            "Power dissipation calculation",
            "Current calculation through feedback network",
            "Standard resistor value recommendation",
            "Package size recommendation based on power rating",
            "Multiple tolerance support (1% and 5%)",
            "Real-time calculation with error estimation",
            "Custom Electronics Design & Development",
            "Full-Cycle R&D and prototyping",
            "Circuit design & simulation",
            "Advanced PCB layout (HDI) and Signal Integrity",
            "Design for Manufacturing (DFM) and Gerber/BOM delivery",
            "Embedded firmware development (STM32, ESP32, RTOS)",
            "Mechanical engineering (SolidWorks) and ECAD/MCAD integration"
        ],
        "keywords": [
            "feedback resistor calculator", "DC/DC converter calculator", "voltage divider calculator", 
            "resistor divider calculator", "switching regulator calculator", "buck converter resistor",
            "boost converter resistor", "step-down converter calculator", "power supply feedback network",
            "voltage reference calculator", "R1 R2 calculator", "feedback network calculator",
            "switching power supply calculator", "voltage regulator calculator", "SMPS calculator",
            "PWM controller feedback", "standard resistor values", "E24 resistor series", "E96 resistor series",
            "precision resistor calculator", "power electronics calculator", "resistor ratio calculator",
            "custom electronics design", "electronics R&D", "full-cycle R&D", "feasibility studies",
            "prototyping", "mass production scaling", "circuit design simulation", "HDI PCB design",
            "advanced PCB layout", "signal integrity", "EMC EMI", "design for manufacturing",
            "DFM services", "Gerber files", "pick-and-place data", "cost-optimized BOMs",
            "embedded firmware STM32", "ESP32 firmware", "bare-metal", "RTOS",
            "mechanical engineering SolidWorks", "ECAD MCAD integration", "thermal management",
            "custom enclosure design"
        ],
        "about": {
            "@type": "Thing",
            "name": "DC/DC Converter Feedback Design",
            "description": "Electronic circuit design focused on voltage regulation and feedback networks in switching power supplies"
        },
        "mainEntity": {
            "@type": "Thing",
            "name": "Feedback Resistor Calculation",
            "description": "Mathematical calculation of resistor values for voltage divider networks in power conversion circuits"
        },
        "audience": {
            "@type": "Audience",
            "audienceType": ["Electronics Engineers", "Power Supply Designers", "Circuit Designers", "Engineering Students", "Hobbyists"]
        },
        "educationalLevel": "Intermediate to Advanced",
        "potentialAction": {
            "@type": "UseAction",
            "name": "Calculate Feedback Resistors",
            "description": "Calculate optimal R1 and R2 resistor values for DC/DC converter feedback networks"
        }
    }
    </script>
    
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            max-width: 500px;
            margin: 0 auto;
            padding: 10px;
            line-height: 1.5;
            font-size: 14px;
            background-color: #f4f4f4;
        }
        .section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            font-size: 20px;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 15px;
            background-color: #ffffff;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }
        .input-row {
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }
        .input-row label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            width: 100%;
        }
        .input-row input, .input-row select {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            width: 100%;
        }
        .input-group {
            display: flex;
            gap: 10px;
        }
        .input-group .input-row {
            flex: 1;
        }
        button {
            width: 100%;
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }
        button:hover {
            background-color: #2980b9;
        }
        .result {
            margin-top: 15px;
            padding: 12px;
            background-color: #f8f9fa;
            border-radius: 4px;
            font-size: 14px;
        }
        .error {
            color: red;
            font-weight: bold;
        }
        .tabs {
            display: flex;
            margin-bottom: 15px;
            gap: 5px;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 10px 8px;
            cursor: pointer;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            transition: background-color 0.2s, border-color 0.2s;
        }
        .tab:hover {
            background-color: #e0e0e0;
            border-color: #bbb;
        }
        .tab.active {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
            font-weight: bold;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .standard-value {
            color: #28a745;
            font-style: italic;
            font-size: 0.9em;
        }
        .range-inputs {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            flex-wrap: nowrap;
        }
        .range-inputs .input-with-unit {
            flex: 1;
            min-width: 80px;
        }
        .range-inputs label {
            font-size: 12px;
            color: #666;
        }
        .range-separator {
            color: #666;
            font-size: 14px;
            margin: 0 5px;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .range-row {
            flex-wrap: nowrap;
        }
        
        .unit {
            font-size: 0.9em;
            color: #666;
            margin-left: 5px;
        }
        .input-with-unit {
            display: flex;
            align-items: center;
            width: 100%;
        }
        .input-with-unit input {
            flex: 1;
        }
        
        .circuit-image {
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }
        
        .circuit-image img {
            max-width: 30%; /* reduced by ~2x */
            height: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .description {
            background-color: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            line-height: 1.6;
            border-left: 4px solid #3498db;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }
        
        .developer-info {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            border-top: 1px solid #e0e0e0;
            font-size: 13px;
            color: #666;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }
        
        .developer-info a {
            color: #3498db;
            text-decoration: none;
            margin: 0 8px;
        }
        
        .developer-info a:hover {
            text-decoration: underline;
        }
        
        .developer-name {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        @media (max-width: 479px) {
            body {
                padding: 5px;
                font-size: 13px;
            }
            
            h1 {
                font-size: 18px;
                margin-bottom: 10px;
            }
            
            .section {
                padding: 10px;
                margin-bottom: 15px;
            }
            
            .description {
                padding: 10px;
                font-size: 13px;
            }
            
            .tab {
                font-size: 13px;
                padding: 8px 6px;
            }
            
            .input-row {
                margin-bottom: 10px;
            }

            /* Make inputs and selects shorter on small screens (approx. quarter width) */
            .input-row input,
            .input-row select,
            .input-with-unit input {
                width: 25%;
            }

            /* Ensure inputs inside .input-with-unit don't expand (set flex basis) */
            .input-row .input-with-unit input,
            .input-row .input-with-unit select {
                flex: 0 0 25%;
                max-width: 25%;
                width: 25%;
            }

            /* Standalone inputs/selects (direct children of .input-row) */
            .input-row > input,
            .input-row > select {
                width: 25%;
                max-width: 25%;
            }

            /* Make the resistor tolerance select larger (+30%) */
            #resistor_tolerance {
                width: 65%;
                max-width: 65%;
                flex: 0 0 65%;
            }

            /* Make the Known voltage select wider on mobile */
            #known_voltage {
                width: 50%;
                max-width: 50%;
                flex: 0 0 50%;
            }

            /* Make the Division ratio input the same width as Known voltage on mobile */
            #division_ratio {
                width: 50%;
                max-width: 50%;
                flex: 0 0 50%;
            }

            .input-with-unit .unit {
                margin-left: 6px;
            }
            
            button {
                padding: 12px;
                font-size: 14px;
            }
            
            .range-inputs {
                flex-direction: column;
                gap: 8px;
                align-items: stretch;
            }
            
            .range-inputs .input-with-unit {
                width: 100%;
            }
            
            .range-separator {
                display: none;
            }
            
            .range-row {
                flex-wrap: wrap;
            }
            
            .developer-info {
                font-size: 12px;
                padding: 15px 5px;
                margin-top: 20px;
            }
            
            .circuit-image img {
                max-width: 45%; /* reduced by ~2x on small screens */
            }
        }
        
        @media (min-width: 480px) {
            .input-row {
                flex-direction: row;
                align-items: center;
            }
            
            .input-row label {
                width: 70%;
                margin-bottom: 0;
            }
            
            .range-row label {
                width: 40%;
            }
            
            .input-row input, .input-row select {
                width: 30%;
            }
            
            .input-with-unit {
                width: 30%;
            }

            /* Shift specified input fields left by 50% on desktop */
            .input-with-unit.move-left { transform: translateX(-70%); transition: transform 0.18s ease; }
            select.move-left { transform: translateX(-55%); transition: transform 0.18s ease; display:inline-block; }

            /* Make the Resistor Series select wider on desktop (expand to the right) */
            #resistor_tolerance {
                width: 40%;
                max-width: 40%;
                flex: 0 0 40%;
                display: inline-block;
            }

            /* Make the Known voltage select wider on desktop */
            #known_voltage {
                width: 70%;
                max-width: 70%;
                flex: 0 0 70%;
                display: inline-block;
            }

            /* Make the Division ratio input the same width as Known voltage on desktop */
            #division_ratio {
                width: 70%;
                max-width: 70%;
                flex: 0 0 70%;
                display: inline-block;
            }

            /* Reduce the label width for that specific row so select doesn't wrap */
            .input-row label[for="resistor_tolerance"] {
                width: 58%;
            }
            
            .range-inputs {
                width: 60%;
                flex-direction: row;
                align-items: center;
            }
            
            .range-separator {
                display: inline;
            }
            
            .tab {
                font-size: 16px;
            }
        }
        
        @media (min-width: 768px) {
            body {
                max-width: 600px;
                font-size: 15px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .description {
                font-size: 15px;
            }
            
            .section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="section">
        <h1>Resistor Divider Calculator</h1>
        
        <div class="description">
            <strong>Resistive Voltage Divider Calculator</strong><br>
            This calculator helps you design a two-resistor voltage divider (R1 upper, R2 lower).
            The divider sets the output voltage according to the formula:
            <strong>V<sub>out</sub> = V<sub>in</sub> √ó R2 / (R1 + R2)</strong>.
            Work modes: 1) known Vin & Vout (auto select standard resistors), 2) manual resistor entry, 3) known division ratio.
        </div>
        
        <div class="circuit-image">
            <img src="image.png" alt="Resistive Divider Circuit Diagram" title="Resistive divider showing R1 (upper) and R2 (lower) configuration">
        </div>

        <div class="input-row">
            <label for="vin">Input Voltage (Vin)</label>
            <div class="input-with-unit move-left">
                <input type="number" id="vin" step="0.0001" value="12.0" min="0.0001" max="1000">
                <span class="unit">V</span>
            </div>
        </div>
        

        <div class="input-row">
            <label for="vout_desired">Output Voltage</label>
            <div class="input-with-unit move-left">
                <input type="number" id="vout_desired" step="0.0001" value="3.3" min="0.0001" max="1000">
                <span class="unit">V</span>
            </div>
        </div>
        
        <div class="input-row">
            <label for="rload">Load Resistance (optional)</label>
            <div class="input-with-unit move-left">
                <input type="number" id="rload" step="0.01" value="" placeholder="" min="0">
                <span class="unit">kŒ©</span>
            </div>
        </div>
        
        <div class="input-row">
            <label for="resistor_tolerance">Resistor Series / Tolerance</label>
            <select id="resistor_tolerance" class="move-left">
                <option value="5">5% (E24)</option>
                <option value="1" selected>1% (E96)</option>
                <option value="0.5">0.5% (E192)</option>
                <option value="0.25">0.25% (E192)</option>
                <option value="0.1">0.1% (E192)</option>
                <option value="all">All (E192 + E96 + E24)</option>
            </select>
        </div>



        
        <div class="input-row">
            <label for="ppm_r1">PPM for R1 (upper)</label>
            <div class="input-with-unit move-left">
                <input type="number" id="ppm_r1" step="1" value="100" min="0" max="1000">
                <span class="unit">PPM</span>
            </div>
        </div>
        
        <div class="input-row">
            <label for="ppm_r2">PPM for R2 (lower)</label>
            <div class="input-with-unit move-left">
                <input type="number" id="ppm_r2" step="1" value="100" min="0" max="1000">
                <span class="unit">PPM</span>
            </div>
        </div>

        <div class="input-row range-row">
                <label>Resistor Range</label>
                <div class="input-with-unit">
                    <input type="number" id="min_resistor" step="0.1" value="1" placeholder="Min">
                    <span class="unit">kŒ©</span>
                </div>
                <span class="range-separator">to</span>
                <div class="input-with-unit">
                    <input type="number" id="max_resistor" step="0.1" value="100" placeholder="Max">
                    <span class="unit">kŒ©</span>
                </div>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="showTab('auto')">Auto Selection</div>
            <div class="tab" onclick="showTab('manual')">Manual Input</div>
            <div class="tab" onclick="showTab('ratio')">Division Ratio</div>
        </div>

        <div id="auto-tab" class="tab-content active">
            <div style="margin:6px 0;color:#666;font-size:13px;">Auto mode uses the resistor range above (defaults shown in kŒ©).</div>
        </div>

        <div id="manual-tab" class="tab-content">
            <div class="input-row">
                <label for="r1_manual">R1 (upper)</label>
                <div class="input-with-unit move-left">
                    <input type="number" id="r1_manual" step="0.01" value="4.7">
                    <span class="unit">kŒ©</span>
                </div>
            </div>
            <div class="input-row">
                <label for="r2_manual">R2 (lower)</label>
                <div class="input-with-unit move-left">
                    <input type="number" id="r2_manual" step="0.01" value="10">
                    <span class="unit">kŒ©</span>
                </div>
            </div>
            <div style="margin:6px 0;color:#666;font-size:13px;">Manual input: enter R1 and R2 values, and either Vin or Vout for calculation.</div>
        </div>

        <div id="ratio-tab" class="tab-content">
            <div class="input-row">
                <label for="division_ratio">Division coefficient .</label>
                <div class="input-with-unit move-left">
                    <input type="number" id="division_ratio" step="0.0001" value="0.6600" min="0.0001" max="0.9999">
                </div>
            </div>
            <div class="input-row">
                <label for="known_voltage">Known voltage</label>
                <div class="input-with-unit move-left">
                    <select id="known_voltage">
                        <option value="vin">Vin</option>
                        <option value="vout">Vout</option>
                    </select>
                </div>
            </div>
            <div style="margin:6px 0;color:#666;font-size:13px;">Division ratio mode: set the ratio and known voltage (Vin or Vout) to calculate the other.</div>
        </div>
        
        <button onclick="calculateResistors()">Calculate</button>
        
        <div id="resistor_result" class="result"></div>
    </div>



    <script>
        // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä—è–¥—ã —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤
        const E24 = [1.0, 1.1, 1.2, 1.3, 1.5, 1.6, 1.8, 2.0, 2.2, 2.4, 2.7, 3.0, 
                    3.3, 3.6, 3.9, 4.3, 4.7, 5.1, 5.6, 6.2, 6.8, 7.5, 8.2, 9.1];
        
        const E96 = [1.00, 1.02, 1.05, 1.07, 1.10, 1.13, 1.15, 1.18, 1.21, 1.24, 1.27, 1.30, 
                    1.33, 1.37, 1.40, 1.43, 1.47, 1.50, 1.54, 1.58, 1.62, 1.65, 1.69, 1.74, 
                    1.78, 1.82, 1.87, 1.91, 1.96, 2.00, 2.05, 2.10, 2.15, 2.21, 2.26, 2.32, 
                    2.37, 2.43, 2.49, 2.55, 2.61, 2.67, 2.74, 2.80, 2.87, 2.94, 3.01, 3.09, 
                    3.16, 3.24, 3.32, 3.40, 3.48, 3.57, 3.65, 3.74, 3.83, 3.92, 4.02, 4.12, 
                    4.22, 4.32, 4.42, 4.53, 4.64, 4.75, 4.87, 4.99, 5.11, 5.23, 5.36, 5.49, 
                    5.62, 5.76, 5.90, 6.04, 6.19, 6.34, 6.49, 6.65, 6.81, 6.98, 7.15, 7.32, 
                    7.50, 7.68, 7.87, 8.06, 8.25, 8.45, 8.66, 8.87, 9.09, 9.31, 9.53, 9.76];

        function generateESeries(m, sig) {
            const arr = [];
            for (let n = 0; n < m; n++) {
                const v = Math.pow(10, n / m);
                const rounded = Number(v.toPrecision(sig));
                arr.push(rounded);
            }
            return Array.from(new Set(arr.map(x => Number(x.toFixed(3))))).sort((a,b)=>a-b);
        }

        const E192 = generateESeries(192, 3);

        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`.tab[onclick="showTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        function getSeriesForValue(value, tolerance) {
            // value is in the same units used when calling (kŒ© in some places)
            const checkSeries = (seriesArr, seriesName) => {
                const decade = Math.pow(10, Math.floor(Math.log10(value)));
                const normalized = value / decade;
                return seriesArr.some(x => Math.abs(x - normalized) < 0.001) ? seriesName : null;
            };

            if (tolerance === 'all') {
                return checkSeries(E192,'E192') || checkSeries(E96, 'E96') || checkSeries(E24, 'E24') || null;
            } else if (tolerance === '0.5' || tolerance === '0.25' || tolerance === '0.1') {
                return checkSeries(E192,'E192') || null;
            } else if (tolerance === '1') {
                return checkSeries(E96, 'E96') || null;
            } else {
                return checkSeries(E24, 'E24') || null;
            }
        }

        function findClosestResistor(value, tolerance) {
            // returns { value: number, series: 'E96'|'E24' }
            const searchInSeries = (seriesArr, seriesName) => {
                let decade = Math.pow(10, Math.floor(Math.log10(value)));
                const normalized = value / decade;
                let closest = seriesArr[0];
                let minDiff = Math.abs(normalized - closest);
                for (const r of seriesArr) {
                    const diff = Math.abs(normalized - r);
                    if (diff < minDiff) {
                        minDiff = diff;
                        closest = r;
                    }
                }
                if (normalized > 9.5 && closest < 1.5) {
                    decade *= 10;
                }
                return { value: closest * decade, series: seriesName, diff: Math.abs(closest * decade - value) };
            };

            if (tolerance === 'all') {
                const cand192 = searchInSeries(E192, 'E192');
                const cand96 = searchInSeries(E96, 'E96');
                const cand24 = searchInSeries(E24, 'E24');
                let best = cand192;
                if (cand96.diff < best.diff) best = cand96;
                if (cand24.diff < best.diff) best = cand24;
                return { value: best.value, series: best.series };
            } else if (tolerance === '0.5' || tolerance === '0.25' || tolerance === '0.1') {
                const c = searchInSeries(E192, 'E192');
                return { value: c.value, series: c.series };
            } else if (tolerance === '1') {
                const c = searchInSeries(E96, 'E96');
                return { value: c.value, series: c.series };
            } else {
                const c = searchInSeries(E24, 'E24');
                return { value: c.value, series: c.series };
            }
        }



        function formatResistorValue(value) {
            if (value >= 1000000) {
                return `${(value / 1000000).toFixed(2)} MŒ©`;
            } else if (value >= 1000) {
                return `${(value / 1000).toFixed(2)} kŒ©`;
            } else {
                return `${value.toFixed(2)} Œ©`;
            }
        }

        function formatPower(power) {
            if (power >= 1) {
                return `${power.toFixed(3)} W`;
            } else if (power >= 0.001) {
                return `${(power * 1000).toFixed(2)} mW`;
            } else {
                return `${(power * 1000000).toFixed(1)} ¬µW`;
            }
        }

        function formatCurrent(current) {
            if (current >= 1) {
                return `${current.toFixed(3)} A`;
            } else if (current >= 0.001) {
                return `${(current * 1000).toFixed(2)} mA`;
            } else {
                return `${(current * 1000000).toFixed(1)} ¬µA`;
            }
        }



        function copyToClipboard(val) {
            try {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(String(val));
                    // small non-blocking notification
                    const n = document.createElement('div');
                    n.textContent = 'Copied: ' + formatResistorValue(val);
                    n.style.position = 'fixed'; n.style.right = '20px'; n.style.bottom = '20px'; n.style.background = '#222'; n.style.color = '#fff'; n.style.padding = '8px 10px'; n.style.borderRadius = '6px';
                    document.body.appendChild(n);
                    setTimeout(()=>n.remove(), 1500);
                } else {
                    window.prompt('Copy resistor value (ohms):', String(val));
                }
            } catch (e) {
                window.prompt('Copy resistor value (ohms):', String(val));
            }
        }

        function useSeriesValue(val, which) {
            const el = document.getElementById(which === 'r1' ? 'r1_manual' : 'r2_manual');
            if (!el) return;
            el.value = (val / 1000).toFixed(3);
            showTab('manual');
            if (which === 'r1') window._lastSelectedR1 = val; else window._lastSelectedR2 = val;
        }





        function getRecommendedPowerRating(actualPower) {
            // –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Ä–µ–∑–∏—Å—Ç–æ—Ä —Å –º–æ—â–Ω–æ—Å—Ç—å—é –≤ 2-3 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–π –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
            const safetyFactor = 2.5;
            const requiredPower = actualPower * safetyFactor;
            
            // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–æ–º–∏–Ω–∞–ª—ã –º–æ—â–Ω–æ—Å—Ç–∏ —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤
            const standardPowers = [0.0625, 0.125, 0.25, 0.5, 1, 2, 5, 10, 25, 50, 100]; // –í–∞—Ç—Ç—ã
            
            for (const power of standardPowers) {
                if (requiredPower <= power) {
                    if (power >= 1) {
                        return `${power}W`;
                    } else {
                        return `${power * 1000}mW`;
                    }
                }
            }
            
            return `>100W`;
        }

        function getRecommendedPackageSize(powerRating, voltage, resistorValue) {
            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –º–æ—â–Ω–æ—Å—Ç—å –≤ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–í–∞—Ç—Ç—ã)
            let powerW;
            if (typeof powerRating === 'string') {
                if (powerRating.includes('mW')) {
                    powerW = parseFloat(powerRating) / 1000;
                } else if (powerRating.includes('W')) {
                    powerW = parseFloat(powerRating);
                } else {
                    powerW = 0.1; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
                }
            } else {
                powerW = powerRating;
            }
            
            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–æ—Ä–ø—É—Å–∞–º SMD —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤
            const smdPackages = [
                { size: '0201', power: 0.05, voltage: 15, name: '0201 (0.6√ó0.3mm)' },
                { size: '0402', power: 0.0625, voltage: 50, name: '0402 (1.0√ó0.5mm)' },
                { size: '0603', power: 0.1, voltage: 50, name: '0603 (1.6√ó0.8mm)' },
                { size: '0805', power: 0.125, voltage: 150, name: '0805 (2.0√ó1.25mm)' },
                { size: '1206', power: 0.25, voltage: 200, name: '1206 (3.2√ó1.6mm)' },
                { size: '1210', power: 0.5, voltage: 200, name: '1210 (3.2√ó2.5mm)' },
                { size: '2010', power: 0.75, voltage: 200, name: '2010 (5.0√ó2.5mm)' },
                { size: '2512', power: 1.0, voltage: 200, name: '2512 (6.4√ó3.2mm)' }
            ];
            
            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–≤–æ–¥–Ω—ã–º —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞–º
            const throughHolePackages = [
                { type: 'Axial 1/4W', power: 0.25, voltage: 500, name: 'Axial 1/4W (√ò2.3√ó6mm)' },
                { type: 'Axial 1/2W', power: 0.5, voltage: 500, name: 'Axial 1/2W (√ò3.2√ó9mm)' },
                { type: 'Axial 1W', power: 1.0, voltage: 500, name: 'Axial 1W (√ò3.6√ó10mm)' },
                { type: 'Axial 2W', power: 2.0, voltage: 500, name: 'Axial 2W (√ò5√ó12mm)' },
                { type: 'Axial 5W', power: 5.0, voltage: 500, name: 'Axial 5W (√ò7√ó16mm)' }
            ];
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã—Å–æ–∫–æ–≤–æ–ª—å—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (>100–í)
            const highVoltage = voltage > 100;
            
            let recommendations = [];
            
            // –ò—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–µ SMD –∫–æ—Ä–ø—É—Å–∞
            for (const pkg of smdPackages) {
                if (pkg.power >= powerW && pkg.voltage >= voltage) {
                    const note = highVoltage && pkg.voltage < 150 ? ' ‚ö†Ô∏è High voltage' : '';
                    recommendations.push(`SMD ${pkg.name}${note}`);
                    break; // –ë–µ—Ä–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–π
                }
            }
            
            // –ò—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –≤—ã–≤–æ–¥–Ω—ã–µ –∫–æ—Ä–ø—É—Å–∞
            for (const pkg of throughHolePackages) {
                if (pkg.power >= powerW && pkg.voltage >= voltage) {
                    recommendations.push(`Through-hole ${pkg.name}`);
                    break; // –ë–µ—Ä–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–π
                }
            }
            
            // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤—ã—Å–æ–∫–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∏–ª–∏ –º–æ—â–Ω–æ—Å—Ç–∏
            if (voltage > 200) {
                recommendations.push('üî• Consider high-voltage rated resistors');
            }
            
            if (powerW > 2) {
                recommendations.push('üå°Ô∏è Consider power resistors with heat sinks');
            }
            
            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ç–æ–∫—É –¥–ª—è —Ç–æ–Ω–∫–æ–ø–ª–µ–Ω–æ—á–Ω—ã—Ö —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤
            const current = Math.sqrt(powerW / resistorValue) * 1000; // mA
            if (current > 100) {
                recommendations.push('‚ö° Consider thick-film or wirewound for high current');
            }
            
            return recommendations.length > 0 ? recommendations : ['Contact manufacturer for custom solution'];
        }

        function calculateResistors() {
            let vin = parseFloat(document.getElementById('vin').value.replace(',', '.'));
            let voutDesired = parseFloat(document.getElementById('vout_desired').value.replace(',', '.'));
            const activeTab = document.querySelector('.tab.active').getAttribute('onclick').replace("showTab('", "").replace("')", "");
            const rloadEl = document.getElementById('rload');
            const rloadRaw = rloadEl ? String(rloadEl.value).replace(',', '.') : '';
            const rload = rloadRaw === '' ? Infinity : parseFloat(rloadRaw) * 1000; // input in kŒ© -> ohm
            const useLoad = Number.isFinite(rload) && !isNaN(rload) && rload > 0;
            const tolerance = document.getElementById('resistor_tolerance').value; // '1','5','0.5','0.25','0.1','all'
            let toleranceText;



            if (tolerance === '1') toleranceText = "1% (E96)";
            else if (tolerance === '5') toleranceText = "5% (E24)";
            else if (tolerance === '0.5') toleranceText = "0.5% (E192)";
            else if (tolerance === '0.25') toleranceText = "0.25% (E192)";
            else if (tolerance === '0.1') toleranceText = "0.1% (E192)";
            else toleranceText = "E192 + E96 + E24 (choose best)";
            
            if (activeTab !== 'manual' && isNaN(vin)) {
                document.getElementById('resistor_result').innerHTML = 
                    '<span class="error">Please enter valid input voltage</span>';
                return;
            }
            
            if (activeTab !== 'manual' && isNaN(voutDesired)) {
                document.getElementById('resistor_result').innerHTML = 
                    '<span class="error">Please enter valid output voltage</span>';
                return;
            }
            
            if (activeTab !== 'manual' && !isNaN(voutDesired) && !isNaN(vin) && voutDesired >= vin) {
                document.getElementById('resistor_result').innerHTML = 
                    '<span class="error">Output voltage must be less than input voltage</span>';
                return;
            }
            
            let r1, r2, r1Series = null, r2Series = null;
            let targetRatio = 0;
            if (!isNaN(vin) && !isNaN(voutDesired) && voutDesired > 0) {
                targetRatio = (vin / voutDesired) - 1; // R1/R2
            }

            // Resistor range (kŒ©) - applies to all modes
            const minRk = parseFloat(document.getElementById('min_resistor').value.replace(',', '.')) || 1;
            const maxRk = parseFloat(document.getElementById('max_resistor').value.replace(',', '.')) || 100;
            const minR = minRk * 1000;
            const maxR = maxRk * 1000;
            if (isNaN(minR) || isNaN(maxR) || minR >= maxR || minR <= 0 || maxR <= 0) {
                document.getElementById('resistor_result').innerHTML = 
                    '<span class="error">Please enter valid resistor range (min &lt; max; values in kŒ©)</span>';
                return;
            }

            const seriesList = [];
            if (tolerance === '1') seriesList.push({arr: E96, name: 'E96'});
            else if (tolerance === '5') seriesList.push({arr: E24, name: 'E24'});
            else if (tolerance === '0.5' || tolerance === '0.25' || tolerance === '0.1') seriesList.push({arr: E192, name: 'E192'});
            else if (tolerance === 'all') { seriesList.push({arr: E192, name: 'E192'}); seriesList.push({arr: E96, name: 'E96'}); seriesList.push({arr: E24, name: 'E24'}); }
            else { seriesList.push({arr: E96, name: 'E96'}); seriesList.push({arr: E24, name: 'E24'}); }

            if (activeTab === 'auto') {
                let bestR1 = 0, bestR2 = 0, bestR1Series = null, bestR2Series = null, minError = Infinity;
                const candidates = [];
                
                for (let decade = Math.pow(10, Math.floor(Math.log10(minR))); decade <= maxR*10; decade *= 10) {
                    for (const seriesObj of seriesList) {
                        for (const value of seriesObj.arr) {
                            const r2Candidate = value * decade;
                            if (r2Candidate < minR || r2Candidate > maxR) continue;
                            
                            const r1Candidate = r2Candidate * targetRatio;
                            if (r1Candidate < minR || r1Candidate > maxR) continue;
                            
                            const r1StdObj = findClosestResistor(r1Candidate, tolerance);
                            const r1Val = r1StdObj.value;
                            const r1SeriesName = r1StdObj.series || seriesObj.name;
                            const unloadedVout = vin * (r2Candidate / (r1Val + r2Candidate));
                            let effectiveR2 = r2Candidate;
                            if (useLoad) effectiveR2 = 1 / (1 / r2Candidate + 1 / rload);
                            const loadedVout = vin * (effectiveR2 / (r1Val + effectiveR2));
                            const actualVout = useLoad ? loadedVout : unloadedVout;
                            const error = Math.abs(actualVout - voutDesired);
                            const relError = error / voutDesired * 100;
                            const totalResistanceCandidate = r1Val + effectiveR2;
                            const dividerCurrentCandidate = actualVout / totalResistanceCandidate;
                            const powerR1Candidate = Math.pow(dividerCurrentCandidate, 2) * r1Val;
                            const powerR2Candidate = Math.pow(dividerCurrentCandidate, 2) * r2Candidate;
                            const loadCurrentCandidate = useLoad ? (loadedVout / rload) : 0;
                            
                            candidates.push({
                                r1: r1Val,
                                r2: r2Candidate,
                                r1Series: r1SeriesName,
                                r2Series: seriesObj.name,
                                unloadedVout,
                                actualVout,
                                absError: error,
                                relError,
                                dividerCurrent: dividerCurrentCandidate,
                                powerR1: powerR1Candidate,
                                powerR2: powerR2Candidate,
                                loadCurrent: loadCurrentCandidate
                            });
                        }
                    }
                }
                // sort by absolute error then relative
                candidates.sort((a,b) => a.absError - b.absError || a.relError - b.relError);
                const topCandidates = candidates.slice(0, 10);
                // store for top-3 display
                window._lastCandidates = topCandidates;
                if (topCandidates.length === 0) {
                    document.getElementById('resistor_result').innerHTML = 
                        '<span class="error">Could not find resistors within specified range</span>';
                    return;
                }
                const best = topCandidates[0];
                bestR1 = best.r1;
                bestR2 = best.r2;
                bestR1Series = best.r1Series;
                bestR2Series = best.r2Series;
                // make sure last selected reflects best (used for highlight)
                window._lastSelectedR1 = best.r1;
                window._lastSelectedR2 = best.r2;
                
                if (bestR1 === 0 || bestR2 === 0) {
                    document.getElementById('resistor_result').innerHTML = 
                        '<span class="error">Could not find resistors within specified range</span>';
                    return;
                }
                
                r1 = bestR1;
                r2 = bestR2;
                r1Series = bestR1Series;
                r2Series = bestR2Series;
                // remember for series table highlighting (values are in ohms)
                window._lastSelectedR1 = r1;
                window._lastSelectedR2 = r2; 
            } 
            else if (activeTab === 'manual') {
                r1 = parseFloat(document.getElementById('r1_manual').value.replace(',', '.')) * 1000;
                r2 = parseFloat(document.getElementById('r2_manual').value.replace(',', '.')) * 1000;
                
                if (isNaN(r1) || isNaN(r2) || r1 <= 0 || r2 <= 0) {
                    document.getElementById('resistor_result').innerHTML = 
                        '<span class="error">Please enter valid resistor values</span>';
                    return;
                }
                
                // Check which voltage is provided
                const hasVin = !isNaN(vin) && vin > 0;
                const hasVout = !isNaN(voutDesired) && voutDesired > 0;
                
                if (!hasVin && !hasVout) {
                    document.getElementById('resistor_result').innerHTML = 
                        '<span class="error">Please enter either Vin or Vout</span>';
                    return;
                }
                
                // Calculate the missing voltage based on R1 and R2
                if (hasVout && !hasVin) {
                    // Calculate Vin from Vout, R1, R2
                    vin = voutDesired * (r1 + r2) / r2;
                    document.getElementById('vin').value = vin.toFixed(4);
                } else if (hasVin && !hasVout) {
                    // Calculate Vout from Vin, R1, R2
                    voutDesired = vin * r2 / (r1 + r2);
                    document.getElementById('vout_desired').value = voutDesired.toFixed(4);
                } else if (hasVin && hasVout) {
                    // Both provided - recalculate Vout from Vin, R1, R2 (Vin takes priority)
                    voutDesired = vin * r2 / (r1 + r2);
                    document.getElementById('vout_desired').value = voutDesired.toFixed(4);
                }
                
                r1Series = getSeriesForValue(r1/1000, tolerance);
                r2Series = getSeriesForValue(r2/1000, tolerance);
                
                // For manual input, use exact values without snapping to standard
                // Note: range validation is optional for manual mode, commenting out
                // if (r1 < minR || r1 > maxR || r2 < minR || r2 > maxR) {
                //     document.getElementById('resistor_result').innerHTML = '<span class="error">Resistor values are outside the specified range</span>';
                //     return;
                // }
            }
            else if (activeTab === 'ratio') {
                const divisionRatio = parseFloat(document.getElementById('division_ratio').value);
                const knownVoltage = document.getElementById('known_voltage').value;
                
                if (!divisionRatio || divisionRatio <= 0 || divisionRatio >= 1) {
                    document.getElementById('resistor_result').innerHTML = '<span class="error">Please enter valid division ratio (0 &lt; ratio &lt; 1)</span>';
                    return;
                }
                
                if (knownVoltage === 'vin') {
                    if (isNaN(vin) || vin <= 0) {
                        document.getElementById('resistor_result').innerHTML = '<span class="error">Please enter valid Vin</span>';
                        return;
                    }
                    // Calculate Vout from Vin and division ratio, but don't update the field
                    voutDesired = vin * divisionRatio;
                    // Only update if field is empty
                    if (document.getElementById('vout_desired').value === '' || document.getElementById('vout_desired').value === '0') {
                        document.getElementById('vout_desired').value = voutDesired.toFixed(4);
                    }
                } else {
                    if (isNaN(voutDesired) || voutDesired <= 0) {
                        document.getElementById('resistor_result').innerHTML = '<span class="error">Please enter valid Vout</span>';
                        return;
                    }
                    // Calculate Vin from Vout and division ratio, but don't update the field
                    vin = voutDesired / divisionRatio;
                    // Only update if field is empty
                    if (document.getElementById('vin').value === '' || document.getElementById('vin').value === '0') {
                        document.getElementById('vin').value = vin.toFixed(4);
                    }
                }
                
                // Now calculate r1/r2 from vin/vout
                const targetRatio = (vin / voutDesired) - 1;
                // Find best r1/r2 in range
                let bestError = Infinity;
                let bestR1 = null, bestR2 = null, bestR1Series = null, bestR2Series = null;
                for (let decade = Math.pow(10, Math.floor(Math.log10(minR))); decade <= maxR*10; decade *= 10) {
                    for (const seriesObj of seriesList) {
                        for (const value of seriesObj.arr) {
                            const r2Candidate = value * decade;
                            if (r2Candidate < minR || r2Candidate > maxR) continue;
                            
                            const r1Candidate = r2Candidate * targetRatio;
                            if (r1Candidate < minR || r1Candidate > maxR) continue;
                            
                            const r1StdObj = findClosestResistor(r1Candidate, tolerance);
                            const r1Val = r1StdObj.value;
                            const r1SeriesName = r1StdObj.series || seriesObj.name;
                            const r2StdObj = findClosestResistor(r2Candidate, tolerance);
                            const r2Val = r2StdObj.value;
                            const r2SeriesName = r2StdObj.series || seriesObj.name;
                            
                            const unloadedVout = vin * (r2Val / (r1Val + r2Val));
                            const error = Math.abs(unloadedVout - voutDesired);
                            if (error < bestError) {
                                bestError = error;
                                bestR1 = r1Val;
                                bestR2 = r2Val;
                                bestR1Series = r1SeriesName;
                                bestR2Series = r2SeriesName;
                            }
                        }
                    }
                }
                if (bestR1 === null) {
                    document.getElementById('resistor_result').innerHTML = '<span class="error">No suitable resistor combination found in range</span>';
                    return;
                }
                r1 = bestR1;
                r2 = bestR2;
                r1Series = bestR1Series;
                r2Series = bestR2Series;
            }
            
            const unloadedVout = vin * (r2 / (r1 + r2));
            const r2_effective = useLoad ? 1 / (1 / r2 + 1 / rload) : r2;
            const voutLoaded = vin * (r2_effective / (r1 + r2_effective));
            const voutActual = useLoad ? voutLoaded : unloadedVout;
            const error = !isNaN(voutDesired) ? Math.abs(voutActual - voutDesired) / voutDesired * 100 : 0;

            // prepare ppm values for variation calculations
            const ppm_r1 = parseFloat(document.getElementById('ppm_r1').value.replace(',', '.')) || 0;
            const ppm_r2 = parseFloat(document.getElementById('ppm_r2').value.replace(',', '.')) || 0;

            // helper: compute min/max vout for given r1/r2 considering tolerance and ppm/temperature
            function computeVoutVariation(r1v, r2v, r1s, r2s) {
                // tolerance per resistor based on series
                const tolForSeries = (series, tolSelection) => {
                    if (series === 'E192') return (tolSelection === '0.5' ? 0.005 : (tolSelection === '0.25' ? 0.0025 : (tolSelection === '0.1' ? 0.001 : 0.005)));
                    if (series === 'E96') return 0.01;
                    return 0.05; // E24 and default
                };
                const tr1 = tolForSeries(r1s, tolerance);
                const tr2 = tolForSeries(r2s, tolerance);
                const temps = [-40, 0, 25, 85];
                let all = [];
                for (const t of temps) {
                    const dT = t - 25;
                    const r1_temp = r1v * (1 + (ppm_r1 / 1e6) * dT);
                    const r2_temp = r2v * (1 + (ppm_r2 / 1e6) * dT);
                    const r1min = r1_temp * (1 - tr1); const r1max = r1_temp * (1 + tr1);
                    const r2min = r2_temp * (1 - tr2); const r2max = r2_temp * (1 + tr2);
                    const vouts = [
                        vin * (r2min / (r1min + r2min)),
                        vin * (r2max / (r1min + r2max)),
                        vin * (r2min / (r1max + r2min)),
                        vin * (r2max / (r1max + r2max))
                    ];
                    all.push(...vouts);
                }
                return { minV: Math.min(...all), maxV: Math.max(...all) };
            }

            // Current and power calculations (use effective network)
            const totalResistance = r1 + r2_effective; // Ohm
            const dividerCurrent = voutActual / totalResistance; // A
            const powerR1 = Math.pow(dividerCurrent, 2) * r1; // W
            // power on R2 remains based on current thru R2 (note in loaded case some current goes to load)
            const powerR2 = Math.pow(dividerCurrent, 2) * r2; // W
            const totalPower = powerR1 + powerR2; // W
            const loadCurrent = useLoad ? (voutLoaded / rload) : 0; // A

            // Build top list: use lastCandidates if available (only for auto), else current r1/r2
            let topList = [];
            if (activeTab === 'auto' && window._lastCandidates && window._lastCandidates.length) {
                topList = window._lastCandidates.slice(0,3);
            } else {
                topList = [{ r1, r2, r1Series, r2Series, actualVout: voutActual, relError: error, dividerCurrent, powerR1, powerR2 }];
            }

            // Compact Top combinations summary (restored)
            let topHtml = '';
            if (topList && topList.length) {
                topHtml = `<div style="margin-bottom:10px;"><strong>Top combinations</strong>`;
                topList.forEach((c, idx) => {
                    const v = computeVoutVariation(c.r1, c.r2, c.r1Series, c.r2Series);
                    const minDevV = +(v.minV - voutDesired).toFixed(4);
                    const maxDevV = +(v.maxV - voutDesired).toFixed(4);
                    const minDevPct = +((minDevV / voutDesired) * 100).toFixed(4);
                    const maxDevPct = +((maxDevV / voutDesired) * 100).toFixed(4);
                    const candidateErrorPct = +(((c.actualVout - voutDesired) / voutDesired) * 100).toFixed(4);
                    const tolPctR1 = (c.r1Series === 'E192') ? (tolerance === '0.5' ? '0.50' : (tolerance === '0.25' ? '0.25' : (tolerance === '0.1' ? '0.10' : '0.50'))) : (c.r1Series === 'E96' ? '1.00' : '5.00');
                    const tolPctR2 = (c.r2Series === 'E192') ? (tolerance === '0.5' ? '0.50' : (tolerance === '0.25' ? '0.25' : (tolerance === '0.1' ? '0.10' : '0.50'))) : (c.r2Series === 'E96' ? '1.00' : '5.00');

                    topHtml += `<div style="border-top:1px solid #eee;padding:8px 0;">
                        <div style=\"font-weight:700;\">Combination ${idx+1}</div>
                        <div>R1 = <strong>${formatResistorValue(c.r1)}</strong> <span style=\\"color:green;font-size:12px;\\">(${c.r1Series || 'Unknown'}, ${tolPctR1}% )</span></div>
                        <div style=\"margin-top:4px;\">R2 = <strong>${formatResistorValue(c.r2)}</strong> <span style=\\"color:green;font-size:12px;\\">(${c.r2Series || 'Unknown'}, ${tolPctR2}% )</span></div>
                        <div style=\"margin-top:6px;color:#333;\">Vout: ${c.actualVout.toFixed(4)} V (error ${candidateErrorPct}% )</div>
                        <div style=\"margin-top:6px;color:#666;\">Min: ${v.minV.toFixed(4)} V (${minDevPct}% ) ‚Ä¢ Max: ${v.maxV.toFixed(4)} V (${maxDevPct}% ) <span style=\\"color:#666;font-size:11px;\\">(worst-case)</span></div>
                    </div>`;
                });
                topHtml += `</div>`;
            }

            // concise result block formatted per request
            let result = '';

            // append top-3 combos if available (mobile-friendly stacked layout)
            // Use topList which works for all modes (auto, manual, ratio)
            if (topList && topList.length) {
                const top3 = topList.slice(0,3);
                const toleranceVal = document.getElementById('resistor_tolerance').value;
                // Get PPM values from input fields
                const ppmR1Input = parseFloat(document.getElementById('ppm_r1').value.replace(',', '.')) || 100;
                const ppmR2Input = parseFloat(document.getElementById('ppm_r2').value.replace(',', '.')) || 100;
                const deltaT = 125; // -40 to +85
                const tolPercent = parseFloat(toleranceVal) / 100;
                
                for (let i = 0; i < top3.length; i++) {
                    const combo = top3[i];
                    const r1 = combo.r1;
                    const r2 = combo.r2;
                    const r1Series = combo.r1Series;
                    const r2Series = combo.r2Series;
                    const vout = combo.actualVout;
                    const error = combo.relError;
                    const divisionRatio = +(r2 / (r1 + r2)).toFixed(6);
                    
                    // Worst-case calculations
                    const r1_tol = r1 * tolPercent;
                    const r2_tol = r2 * tolPercent;
                    const r1_temp = r1 * (ppmR1Input / 1e6) * deltaT;
                    const r2_temp = r2 * (ppmR2Input / 1e6) * deltaT;
                    
                    const r1_min = r1 - r1_tol - r1_temp;
                    const r1_max = r1 + r1_tol + r1_temp;
                    const r2_min = r2 - r2_tol - r2_temp;
                    const r2_max = r2 + r2_tol + r2_temp;
                    
                    const vout_min = vin * (r2_min / (r1_max + r2_min));
                    const vout_max = vin * (r2_max / (r1_min + r2_max));
                    const delta_vout = vout_max - vout_min;
                    const delta_error = (delta_vout / vout) * 100;
                    
                    result += `<div style="margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; width: 100%; box-sizing: border-box;">`;
                    result += `<h4 style="margin: 0 0 10px 0; color: #333;">Combination ${i+1}</h4>`;
                    result += `<strong>R1 = ${formatResistorValue(r1)} <small style="color: green;">(${r1Series || 'Custom'} series, ${toleranceVal}%)</small></strong><br>`;
                    result += `<strong>R2 = ${formatResistorValue(r2)} <small style="color: green;">(${r2Series || 'Custom'} series, ${toleranceVal}%)</small></strong><br>`;
                    result += `<strong>Vin:</strong> <span style="color: blue;">${vin.toFixed(4)} V</span><br>`;
                    result += `<strong>Vout:</strong> <span style="color: blue;">${vout.toFixed(4)} V</span>${activeTab !== 'manual' && activeTab !== 'ratio' ? ` <span style="color: red;">(error ${error.toFixed(4)}%)</span>` : ''}<br>`;
                    result += `<strong>Division ratio:</strong> <span style="color: blue;">${divisionRatio}</span><br>`;
                    const dividerResistance = (r1 + r2) / 1000; // kŒ©
                    result += `<strong>Divider load:</strong> <span style="color: blue;">${dividerResistance.toFixed(3)} kŒ©</span><br><br>`;
                    result += `<strong>---Worst-case (Tolerance + Temperature)---</strong><br>`;
                    result += `<small>The resistance of R1 with an accuracy of ${toleranceVal}% is ${ppmR1Input} ppm/¬∞C, and the resistance of R2 with an accuracy of ${toleranceVal}% is ${ppmR2Input} ppm/¬∞C. At temperatures from -40 to +85 degrees Celsius.</small><br>`;
                    result += `<strong>Minimum Vout:</strong> <strong style="color: #007bff;">${vout_min.toFixed(4)} V</strong><br>`;
                    result += `<strong>Maximum Vout:</strong> <strong style="color: #007bff;">${vout_max.toFixed(4)} V</strong><br>`;
                    result += `<strong>Delta Vout:</strong> <strong style="color: #007bff;">${delta_vout.toFixed(4)} V</strong>  (error <strong style="color: #dc3545;">${delta_error.toFixed(4)}%</strong>)<br>`;
                    result += `</div>`;
                }
            }
            document.getElementById('resistor_result').innerHTML = result;
            
            // initialize series multiplier if not set

        
            // initialize series multiplier if not set
            window._seriesMultiplier = window._seriesMultiplier || 1000;

        }
    </script>
    
    <!-- Technical Reference -->
    <div class="tech-reference" style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 15px; margin: 20px; font-size: 12px; color: #666;">
        <h4 style="margin: 0 0 10px 0; color: #010912;"> Resistor Specifications & Package Info</h4>
        
        <div style="margin-bottom: 12px;">
            <strong style="color: #495057;">SMD Packages:</strong>
            <div style="font-family: 'Courier New', monospace; line-height: 1.4; margin-top: 4px;">
                <strong>0201:</strong> 50mW/15V (max. 50V)<br>
                <strong>0402:</strong> 62.5mW/50V (max. 100V)<br>
                <strong>0603:</strong> 100mW/50V (max. 100V)<br>
                <strong>0805:</strong> 125mW/150V (max. 200V)<br>
                <strong>1206:</strong> 250mW/200V (max. 400V)<br>
                <strong>1210:</strong> 500mW/200V (max. 400V)<br>
                <strong>2010:</strong> 750mW/200V (max. 400V)<br>
                <strong>2512:</strong> 1W/200V (max. 400V)
            </div>
        </div>

        <div style="margin-bottom: 12px;">
            <strong style="color: #495057;">Through-hole Packages:</strong>
            <div style="font-family: 'Courier New', monospace; line-height: 1.4; margin-top: 4px;">
                <strong>1/4W:</strong> 250mW/500V (Axial √ò2.3√ó6mm)<br>
                <strong>1/2W:</strong> 500mW/500V (Axial √ò3.2√ó9mm)<br>
                <strong>1W:</strong> 1W/500V (Axial √ò3.6√ó10mm)<br>
                <strong>2W:</strong> 2W/500V (Axial √ò5√ó12mm)<br>
                <strong>5W:</strong> 5W/500V (Axial √ò7√ó16mm)
            </div>
        </div>

        <div style="font-size: 11px; color: #28a745; font-weight: bold;">
            ‚ö° Safety Factor: Calculator recommends 2.5x power margin for reliability
        </div>
        
        <div style="font-size: 10px; margin-top: 8px; font-style: italic;">
            *Working voltage/Maximum voltage ratings based on industry standards
        </div>
    </div>

    <div class="contact-card" style="background:#e8f5e9; border:1px solid #c8e6c9; border-radius:8px; padding:15px; margin:20px; font-size:14px; color:#333; text-align:center;">
        <h4 style="margin:0 0 8px 0;">Custom Electronics Design & Development</h4>
        <p style="margin:0 0 12px;">Transforming complex concepts into market-ready products with precision engineering.</p>
        <ul style="margin:0 0 8px;padding-left:18px; line-height:1.45; display:inline-block; text-align:left;">
            <li>‚≠ê <strong>20+ Years of Experience:</strong> Proven expertise in diverse industries including automotive, industrial automation, medical devices, consumer electronics, and IoT systems.</li>
            <li>üîÑ <strong>Full-Cycle R&D:</strong> Comprehensive support from feasibility studies and prototyping to mass production scaling.</li>
            <li>üìê <strong>Circuit Design & Simulation:</strong> Reliable schematic capture tailored to cost and performance requirements.</li>
            <li>üü© <strong>Advanced PCB Layout:</strong> High-density interconnect (HDI) and multi-layer designs optimized for Signal Integrity and EMC/EMI compliance.</li>
            <li>üìã <strong>Design for Manufacturing (DFM):</strong> Production-ready documentation, including Gerber files, pick-and-place data, and cost-optimized BOMs.</li>
            <li>üíª <strong>Embedded Firmware Development:</strong> Efficient C/C++ firmware for STM32, ESP32, and other architectures (Bare-metal & RTOS).</li>
            <li>üîß <strong>Mechanical Engineering (SolidWorks):</strong> 3D CAD modeling, thermal management, and custom enclosure design for seamless ECAD/MCAD integration.</li>
        </ul>
        <p style="margin:10px 0 10px 0; padding:10px 15px; background-color:#c8e6c9; border-radius:6px; font-style: italic; color: #2e7d32;">Contact me to discuss your project, timelines, and cost estimates.</p>
        <p style="margin:10px 0 0 0;">üìß <a href="mailto:serbinovoleg@gmail.com">serbinovoleg@gmail.com</a></p>
        <p style="margin:4px 0 0 0;">üåê <a href="https://serbinov.github.io/" target="_blank" rel="noopener">Website</a> ‚Ä¢ <a href="https://github.com/serbinov" target="_blank" rel="noopener">GitHub</a></p>
    </div>

    <!-- Semantic Content for SEO (Hidden) -->
    <footer style="display: none; visibility: hidden; position: absolute; left: -9999px; opacity: 0; font-size: 0; height: 0; width: 0; overflow: hidden; margin-top: 40px; padding: 20px; border-top: 1px solid #e0e0e0; color: #666; line-height: 1.6;">
        <section>
            <h3 style="font-size: 14px; margin-bottom: 10px; color: #2c3e50;">About This Calculator</h3>
            <p>This <strong>Resistor Divider Calculator</strong> is a professional engineering tool designed for <em>electronics engineers</em> and designers. It calculates optimal <strong>R1 and R2</strong> values for general-purpose resistive voltage dividers, supports standard resistor selection (E24, E96, E192), and evaluates effects of resistor tolerances, temperature drift, and external loading.</p>
            
            <h4 style="font-size: 13px; margin: 15px 0 8px 0; color: #34495e;">Supported Converter Types</h4>
            <p>The calculator supports feedback design for <strong>step-down regulators (buck)</strong>, <strong>step-up regulators (boost)</strong>, <strong>SEPIC converters</strong>, <strong>Cuk converters</strong>, <strong>flyback converters</strong>, <strong>forward converters</strong>, and other <strong>isolated and non-isolated switching topologies</strong>. It's compatible with popular <strong>PWM controller ICs</strong> and <strong>switching regulator modules</strong>.</p>
            
            <h4 style="font-size: 13px; margin: 15px 0 8px 0; color: #34495e;">Standard Resistor Series Support</h4>
            <p>Features automatic selection from <strong>E24 resistor series (5% tolerance)</strong> and <strong>E96 resistor series (1% tolerance)</strong> for <strong>precision feedback networks</strong>. The tool calculates <strong>power dissipation</strong>, recommends appropriate <strong>resistor package sizes</strong>, and provides <strong>SMD and through-hole component recommendations</strong>.</p>
            
            <h4 style="font-size: 13px; margin: 15px 0 8px 0; color: #34495e;">Applications</h4>
            <p>Ideal for designing <strong>point-of-load regulators</strong>, <strong>battery chargers</strong>, <strong>LED drivers</strong>, <strong>motor drive power supplies</strong>, <strong>telecom power systems</strong>, <strong>server power modules</strong>, <strong>automotive electronics</strong>, <strong>industrial control systems</strong>, and <strong>portable device power management</strong>.</p>
        </section>
        
        <section style="margin-top: 20px;">
            <h3 style="font-size: 14px; margin-bottom: 10px; color: #2c3e50;">Keywords & Related Terms</h3>
            <p style="font-size: 11px; font-style: italic;">
                <span>switching mode power supply calculator</span> ‚Ä¢ 
                <span>SMPS feedback design</span> ‚Ä¢ 
                <span>voltage regulation circuit</span> ‚Ä¢ 
                <span>power converter design tool</span> ‚Ä¢ 
                <span>electronic circuit calculator</span> ‚Ä¢ 
                <span>resistor selection tool</span> ‚Ä¢ 
                <span>voltage setting network</span> ‚Ä¢ 
                <span>feedback loop design</span> ‚Ä¢ 
                <span>power electronics engineering</span> ‚Ä¢ 
                <span>circuit design software</span> ‚Ä¢ 
                <span>embedded power supply</span> ‚Ä¢ 
                <span>switching topology design</span> ‚Ä¢ 
                <span>voltage reference circuit</span> ‚Ä¢ 
                <span>precision voltage setting</span> ‚Ä¢ 
                <span>component selection guide</span>
            </p>
        </section>
    </footer>

    <div style="text-align: center; margin-top: 30px; padding: 15px; font-size: 13px; color: #666;">
        Developed by Oleg Serbinov ‚Ä¢ <span style="font-weight:bold;">v1.1</span> ‚Ä¢ 2026-01-11
    </div>
</body>
</html>